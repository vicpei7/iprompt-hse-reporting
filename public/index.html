<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iPrompt HSE Reporting</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>
<body>

  <!-- Top Navigation Bar -->
  <nav class="navbar">
    <div class="nav-brand" onclick="navigateTo('landing')">
      <i class="fas fa-shield-alt"></i>
      <span>iPrompt HSE Reporting</span>
    </div>
    <div class="nav-breadcrumb" id="breadcrumb"></div>
    <div class="nav-info">
      <span id="currentDate"></span>
    </div>
  </nav>

  <!-- Main Content Area -->
  <main class="container" id="app">

    <!-- ==================== LANDING PAGE ==================== -->
    <section id="page-landing" class="page active">
      <div class="page-header">
        <h1>Welcome to iPrompt HSE Reporting</h1>
        <p class="subtitle">Select a project to begin entering HSE indicators</p>
      </div>
      <div class="project-cards" id="projectCards">
        <!-- Cards generated by JS -->
      </div>
    </section>

    <!-- ==================== MONTH SELECTION PAGE ==================== -->
    <section id="page-months" class="page">
      <div class="page-header">
        <h1 id="monthsTitle">Select Month</h1>
        <p class="subtitle">Choose a month for data entry, or view cumulative totals</p>
      </div>

      <!-- Cumulative button -->
      <div class="cumulative-card" onclick="loadCumulative()">
        <i class="fas fa-chart-bar"></i>
        <div>
          <strong>View Cumulative 2026</strong>
          <span>See year-to-date totals across all months</span>
        </div>
        <i class="fas fa-chevron-right"></i>
      </div>

      <h2 class="section-title">Monthly Input</h2>
      <div class="month-grid" id="monthGrid">
        <!-- Month buttons generated by JS -->
      </div>
    </section>

    <!-- ==================== INPUT METHOD CHOICE ==================== -->
    <section id="page-method" class="page">
      <div class="page-header">
        <h1 id="methodTitle">How would you like to provide data?</h1>
        <p class="subtitle" id="methodSubtitle"></p>
      </div>

      <!-- Contract selector -->
      <div class="contract-selector">
        <label>Select your contract:</label>
        <select id="contractSelect" onchange="onContractChange()">
          <!-- Options generated by JS -->
        </select>
      </div>

      <div class="method-cards">
        <div class="method-card" onclick="goToManualInput()">
          <div class="method-icon" style="background: #e8f4fd;">
            <i class="fas fa-keyboard" style="color: #1a5276;"></i>
          </div>
          <h3>Manual Input</h3>
          <p>Type in the HSE indicator values directly into the table</p>
          <span class="method-badge">Recommended</span>
        </div>
        <div class="method-card" onclick="goToUpload()">
          <div class="method-icon" style="background: #fef9e7;">
            <i class="fas fa-file-upload" style="color: #b7950b;"></i>
          </div>
          <h3>Upload HSE Report</h3>
          <p>Upload your monthly HSE report and let the system extract the data automatically</p>
          <span class="method-badge secondary">PDF, Excel, Word</span>
        </div>
      </div>
    </section>

    <!-- ==================== MANUAL INPUT TABLE ==================== -->
    <section id="page-input" class="page">
      <div class="page-header compact">
        <div class="input-header-row">
          <div>
            <h1 id="inputTitle">Monthly Input</h1>
            <p class="subtitle" id="inputSubtitle"></p>
          </div>
          <div class="input-actions">
            <span class="contract-badge" id="inputContractBadge"></span>
            <button class="btn btn-save" onclick="saveAllData()">
              <i class="fas fa-save"></i> Save Data
            </button>
          </div>
        </div>
      </div>

      <!-- Table 1: Count indicators -->
      <div class="table-section">
        <h2 class="table-title">
          <i class="fas fa-chart-line"></i>
          HSE Performance Indicators
        </h2>
        <div class="table-wrapper">
          <table class="data-table" id="table1">
            <!-- Generated by JS -->
          </table>
        </div>
      </div>

      <!-- Table 2: Planned vs Actual -->
      <div class="table-section">
        <h2 class="table-title">
          <i class="fas fa-tasks"></i>
          Planned vs Actual Activities
        </h2>
        <div class="table-wrapper">
          <table class="data-table" id="table2">
            <!-- Generated by JS -->
          </table>
        </div>
      </div>

      <div class="bottom-actions">
        <button class="btn btn-outline" onclick="navigateTo('method')">
          <i class="fas fa-arrow-left"></i> Back
        </button>
        <button class="btn btn-save btn-lg" onclick="saveAllData()">
          <i class="fas fa-save"></i> Save All Data
        </button>
      </div>
    </section>

    <!-- ==================== FILE UPLOAD PAGE ==================== -->
    <section id="page-upload" class="page">
      <div class="page-header">
        <h1 id="uploadTitle">Upload HSE Report</h1>
        <p class="subtitle" id="uploadSubtitle"></p>
      </div>

      <div class="upload-area" id="uploadArea">
        <div class="upload-zone" id="dropZone">
          <i class="fas fa-cloud-upload-alt upload-icon"></i>
          <h3>Drag & drop your HSE report here</h3>
          <p>or click to browse files</p>
          <p class="upload-formats">Supported: PDF, Excel (.xlsx), Word (.docx), CSV, Text</p>
          <input type="file" id="fileInput" accept=".pdf,.xlsx,.xls,.docx,.doc,.txt,.csv" style="display:none;">
        </div>

        <div id="uploadProgress" class="upload-progress" style="display:none;">
          <div class="spinner"></div>
          <p>Scanning your report for HSE indicators...</p>
        </div>
      </div>

      <!-- Extracted results -->
      <div id="extractedResults" style="display:none;">
        <div class="extracted-header">
          <h2><i class="fas fa-magic"></i> Extracted Data</h2>
          <p>Review the values found in your report. Edit any incorrect values before saving.</p>
        </div>

        <div class="table-section">
          <h3 class="table-title">
            <i class="fas fa-chart-line"></i>
            HSE Performance Indicators
          </h3>
          <div class="table-wrapper">
            <table class="data-table" id="extractedTable1">
              <!-- Generated by JS -->
            </table>
          </div>
        </div>

        <div class="table-section">
          <h3 class="table-title">
            <i class="fas fa-tasks"></i>
            Planned vs Actual Activities
          </h3>
          <div class="table-wrapper">
            <table class="data-table" id="extractedTable2">
              <!-- Generated by JS -->
            </table>
          </div>
        </div>

        <div class="bottom-actions">
          <button class="btn btn-outline" onclick="resetUpload()">
            <i class="fas fa-redo"></i> Upload Different File
          </button>
          <button class="btn btn-save btn-lg" onclick="saveExtractedData()">
            <i class="fas fa-save"></i> Confirm & Save Extracted Data
          </button>
        </div>
      </div>
    </section>

    <!-- ==================== CUMULATIVE VIEW ==================== -->
    <section id="page-cumulative" class="page">
      <div class="page-header compact">
        <div class="input-header-row">
          <div>
            <h1 id="cumulativeTitle">Cumulative 2026</h1>
            <p class="subtitle">Year-to-date totals across all months</p>
          </div>
          <button class="btn btn-outline" onclick="navigateTo('months')">
            <i class="fas fa-arrow-left"></i> Back to Months
          </button>
        </div>
      </div>

      <div class="table-section">
        <h2 class="table-title">
          <i class="fas fa-chart-line"></i>
          Cumulative HSE Performance Indicators
        </h2>
        <div class="table-wrapper">
          <table class="data-table" id="cumulativeTable1">
          </table>
        </div>
      </div>

      <div class="table-section">
        <h2 class="table-title">
          <i class="fas fa-tasks"></i>
          Cumulative Planned vs Actual
        </h2>
        <div class="table-wrapper">
          <table class="data-table" id="cumulativeTable2">
          </table>
        </div>
      </div>
    </section>

  </main>

  <!-- Toast notification -->
  <div class="toast" id="toast">
    <i class="fas fa-check-circle"></i>
    <span id="toastMessage">Saved successfully!</span>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>
